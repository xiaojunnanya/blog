---
id: delete_node_modules
slug: /tool/delete_node_modules
title: 为什么删除node_modules文件夹那么慢
date: 2002-09-26
authors: 鲸落
tags: [tool, rimraf]
keywords: [tool, rimraf]
---

## Windows系统 为什么删除node_modules文件夹那么慢？

在Windows系统中删除`node_modules`文件夹可能会比较慢的原因有以下几点：

1. **文件数量过多**：`node_modules`文件夹通常包含大量的文件和文件夹，如果其中文件数量过多，系统需要逐一扫描并删除每个文件，这会导致删除过程变得缓慢。
2. **文件路径过长**：在Windows系统中，文件路径的长度有限制，如果`node_modules`文件夹中存在过长的文件路径，系统在删除这些文件时可能会变得缓慢。
3. **文件占用**：`node_modules`文件夹中可能包含一些被其他程序占用的文件，这会导致系统无法立即删除这些文件，从而延长删除时间。
4. **磁盘速度**：如果`node_modules`文件夹位于机械硬盘上而非固态硬盘，机械硬盘的读写速度相对较慢，也会影响删除操作的速度。
5. **杀软扫描**：有些杀毒软件在删除文件时会对文件进行扫描，以确保文件不包含恶意代码。这个额外的扫描过程也会增加删除文件的时间。



## 为什么在苹果系统上删除node_modules文件夹就很快？

**文件系统差异**：Windows采用的是NTFS文件系统，而macOS使用的是APFS文件系统，APFS 在快速复制、文件元数据管理、空间分配等方面具有优势，支持快速文件复制、快速目录大小计算、快速空间释放等功能，而 NTFS 和 exFAT 在某些方面可能不如 APFS 那么快速和高效。

**文件路径处理**：Windows对文件路径长度有限制，而macOS对文件路径长度的限制相对较宽松。如果`node_modules`文件夹中存在过长的文件路径，Windows系统在处理这些文件时可能会变得缓慢。

**文件锁定**：Windows系统在处理被其他程序占用的文件时，可能会出现文件锁定的情况，导致删除操作变得缓慢。而macOS系统在这方面可能更加灵活。

**文件系统碎片**：Windows系统在长时间使用后可能会产生文件系统碎片，这会影响文件的读写和删除速度。而macOS对文件系统碎片的处理可能更加高效。



## Windows中删除慢解决方案

为了加快在Windows系统中删除文件夹的速度，可以尝试使用命令行删除、关闭占用文件的程序、使用专门的删除工具等方法，以提高删除效率。

- 在删除前关闭占用文件的程序：确保`node_modules`文件夹中的文件没有被其他程序占用，可以提前关闭相关程序再进行删除操作。
- 使用固态硬盘：如果可能的话，将`node_modules`文件夹放在固态硬盘上，可以显著提高文件的读写速度。
- 使用命令行删除：在命令行中使用`rd /s /q node_modules`命令可以快速删除`node_modules`文件夹，避免Windows资源管理器中的删除操作。
- 使用专门的删除工具：例如 npm 全局安装 rimraf，以后直接使用删除命令即可。

```shell
npm install rimraf -g 

rimraf node_modules/
```



## 补充

软件[FastCopy](https://fastcopy.jp/)，删得很快，拷贝也快，后面可以试试